{"version":3,"sources":["webpack:///../../../src/components/VGrid/VSpacer.ts","webpack:///./src/views/library/components/Editor.vue?d6a4","webpack:///src/views/library/components/Editor.vue","webpack:///./src/views/library/components/Editor.vue?70c1","webpack:///./src/views/library/components/Editor.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","loading","ref","staticStyle","editorOptions","on","onEditorFocus","onEditorBlur","onEditorChange","scopedSlots","_u","key","fn","_g","model","value","callback","$$v","dialog","expression","_v","stay","loadNewContent","save","staticRenderFns","components","editor","data","computed","mounted","setMarkdown","watch","currentFile","isChange","oldCurrentFile","old","document","getElementById","click","saveFileEvent","saveFile","content","methods","focused","console","log","getMarkdown","setChange","$refs","toastuiEditor","invoke","setSelectItem","pathname","$http","notificationApi","commitAdd","pathName","commitEdit","md","then","notification","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VContainer","VDialog","VOverlay","VProgressCircular","VSpacer"],"mappings":"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","file":"js/chunk-bc1ae838.1c569285.js","sourcesContent":["import './_grid.sass'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nexport default createSimpleFunctional('spacer', 'div', 'v-spacer')\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"fill-height pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-overlay',{attrs:{\"value\":_vm.loading}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"size\":\"64\"}})],1),_c('editor',{ref:\"toastuiEditor\",staticStyle:{\"width\":\"100%\"},attrs:{\"initialEditType\":\"wysiwyg\",\"options\":_vm.editorOptions,\"height\":\"100%\"},on:{\"focus\":_vm.onEditorFocus,\"blur\":_vm.onEditorBlur,\"change\":_vm.onEditorChange}}),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"290\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"dialogBtn\",\"color\":\"primary\",\"dark\":\"\"}},on))]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Save Before Leave?\")]),_c('v-card-text',[_vm._v(\"You have unsaved change. Do you want to save these change ?\")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"grey darken-1\",\"text\":\"\"},on:{\"click\":_vm.stay}},[_vm._v(\"cancel\")]),_c('v-btn',{attrs:{\"color\":\"red darken-1\",\"text\":\"\"},on:{\"click\":_vm.loadNewContent}},[_vm._v(\"Dont Save\")]),_c('v-btn',{attrs:{\"color\":\"primary darken-1\",\"text\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"Save\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container fluid class=\"fill-height pa-0\">\r\n    <v-overlay :value=\"loading\">\r\n      <v-progress-circular indeterminate size=\"64\"></v-progress-circular>\r\n    </v-overlay>\r\n    <editor\r\n      @focus=\"onEditorFocus\"\r\n      @blur=\"onEditorBlur\"\r\n      @change=\"onEditorChange\"\r\n      initialEditType=\"wysiwyg\"\r\n      :options=\"editorOptions\"\r\n      ref=\"toastuiEditor\"\r\n      height=\"100%\"\r\n      style=\"width:100%\"\r\n    ></editor>\r\n    <v-dialog v-model=\"dialog\" persistent max-width=\"290\">\r\n      <template v-slot:activator=\"{ on }\">\r\n        <v-btn id=\"dialogBtn\" color=\"primary\" dark v-on=\"on\" style=\"display: none\"></v-btn>\r\n      </template>\r\n      <v-card>\r\n        <v-card-title class=\"headline\">Save Before Leave?</v-card-title>\r\n        <v-card-text>You have unsaved change. Do you want to save these change ?</v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"grey darken-1\" text @click=\"stay\">cancel</v-btn>\r\n          <v-btn color=\"red darken-1\" text @click=\"loadNewContent\">Dont Save</v-btn>\r\n          <v-btn color=\"primary darken-1\" text @click=\"save\">Save</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport \"codemirror/lib/codemirror.css\";\r\nimport \"@toast-ui/editor/dist/toastui-editor.css\";\r\n\r\nimport { Editor } from \"@toast-ui/vue-editor\";\r\nimport { mapState, mapMutations } from \"vuex\";\r\n\r\nexport default {\r\n  components: {\r\n    editor: Editor\r\n  },\r\n  data: () => ({\r\n    editorOptions: {\r\n      usageStatistics: false,\r\n      useCommandShortcut: true\r\n    },\r\n    dialog: false,\r\n    focused: false,\r\n    loading: false,\r\n    oldCurrentFile: null\r\n  }),\r\n  computed: {\r\n    ...mapState({\r\n      isChange: state => state.library.isChange,\r\n      currentFile: state => state.library.currentFile,\r\n      saveFileEvent: state => state.library.saveFileEvent,\r\n      content: state => state.library.content\r\n    })\r\n  },\r\n  mounted() {\r\n    this.setMarkdown();\r\n  },\r\n  watch: {\r\n    currentFile(newFile, old) {\r\n      if (this.isChange) {\r\n        this.oldCurrentFile = old;\r\n        document.getElementById(\"dialogBtn\").click();\r\n      } else {\r\n        this.loadNewContent()\r\n      }\r\n    },\r\n    saveFileEvent(value) {\r\n      if (value) {\r\n        this.saveFile();\r\n      }\r\n    },\r\n    content() {\r\n      this.setMarkdown();\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      setChange: \"setChange\",\r\n      setSelectItem: \"setSelectItem\",\r\n      commitContent: \"commitContent\"\r\n    }),\r\n    onEditorFocus() {\r\n      this.focused = true;\r\n      console.log(\"onEditorFocus\");\r\n    },\r\n    onEditorBlur() {\r\n      console.log(\"onEditorBlur\");\r\n    },\r\n    onEditorChange() {\r\n      if (this.focused && this.getMarkdown() != this.content) {\r\n        this.setChange(true);\r\n      }\r\n    },\r\n    getMarkdown() {\r\n      return this.$refs.toastuiEditor.invoke(\"getMarkdown\");\r\n    },\r\n    setMarkdown() {\r\n      this.$refs.toastuiEditor.invoke(\"setMarkdown\", this.content, false);\r\n      this.loading = false;\r\n      this.setChange(false);\r\n      this.focused = false;\r\n    },\r\n    stay() {\r\n      this.dialog = false;\r\n      setSelectItem([this.oldCurrentFile]);\r\n    },\r\n    save() {\r\n      this.loading = true;\r\n      let md = this.getMarkdown();\r\n      let pathname;\r\n      if (this.oldCurrentFile == null) {\r\n        pathname = \"untitled.md\";\r\n        this.$http.notificationApi.commitAdd(pathName, false);\r\n      } else {\r\n        pathname = this.oldCurrentFile.pathName;\r\n      }\r\n      this.$http.notificationApi.commitEdit(pathname, md).then(res => {\r\n        this.commitContent(md);\r\n        this.loading = false;\r\n        this.dialog = false;\r\n      });\r\n    },\r\n    loadNewContent() {\r\n        this.loading = true;\r\n        this.$http.fileApi.fetchContent(this.currentFile.pathName).then(res => {\r\n          this.commitContent(res.data);\r\n        });\r\n    },\r\n    saveFile() {\r\n      this.loading = true;\r\n      let md = this.getMarkdown();\r\n      let pathname;\r\n      if (this.currentFile == null) {\r\n        pathname = \"untitled.md\";\r\n        this.$http.notification.commitAdd(pathName, false);\r\n      } else {\r\n        pathname = this.currentFile.pathName;\r\n      }\r\n      this.$http.notificationApi.commitEdit(pathname, md).then(res => {\r\n        this.commitContent(md);\r\n        this.loading = false;\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=09c3164e&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VContainer,VDialog,VOverlay,VProgressCircular,VSpacer})\n"],"sourceRoot":""}